function isFirefox(){return void 0!==window.mozInnerScreenX}function isIE(){return-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>0}var RepeaterUtilities=function(a){var b="ngRepeat:";return this.extractCollection=function(c){var d=a(c).find("tbody"),e=d.find("tr:first-child()"),f=e.attr("ng-repeat");f&&""!==f||(f=e.data("ng-repeat"));var g=function(a){if(a){var b=a.indexOf(" in ");b>0&&(a=a.substring(b+4),b=a.search(/( )|(\|)|(\")+/gi),b>0&&(a=a.substring(0,b)))}return a};return f=g(f),f&&""!==f||d.contents().filter(function(){return 8===this.nodeType}).each(function(a,c){var d=c.nodeValue;if(d.indexOf(b)>=0){var e=d.substring(d.indexOf(b)+b.length);return f=g(e),!1}}),f},this}(jQuery),MouseClickObserver=function(a,b,c){var d=[];this.addContainer=function(f){var g=!1;b.forEach(d,function(a){a===f&&(g=!0)}),g||d.push(f),a(c.document).on("mouseup",e)};var e=function(b){for(var e=0;e<d.length;e++){var f=a(d[e].selector);if(!f.is(b.target)&&0===f.has(b.target).length){"none"!==f.css("display")&&(d.splice(e,1),0===d.length&&a(c.document).off("mouseup"),f.hide());break}}};return this}(jQuery,angular,window);!function(a,b){"use strict";a.module("ng-scrolling-table.mixins",[]).factory("stgControllerMixins",function(){return b.extend(!0,this,{filterable:function(){return{tableModel:{filter:{text:null}},getFilterProperty:function(){return"tableModel.filter.text"}}},sortable:function(){return{tableModel:{sort:{asc:!0,col:null}},isSortedAsc:function(a){return this.isSortDirection_(a,!0)},isSortedDesc:function(a){return this.isSortDirection_(a,!1)},isSortDirection_:function(a,b){return this.tableModel.sort.asc===b&&this.tableModel.sort.col===a},isSorting:function(){return null!==this.tableModel.sort.col},sort:function(a){var b=this.tableModel.sort;b.asc=b.col===a?!b.asc:!0,b.col=a},clearSort:function(){this.sort(null)},toSortParams:function(){return null!==this.tableModel.sort.col?{$orderby:this.tableModel.sort.col+" "+(this.tableModel.sort.asc?"asc":"desc")}:{}}}}}),this})}(angular,jQuery),function(a,b){"use strict";var c=a.module("table.column-fixed",[]);c.directive("colFixed",function(){return{restrict:"CA",link:function(a,c,d){if("false"!==d.colFixed){var e=c.width();b(c).css({"min-width":e,"max-width":e})}}}})}(angular,jQuery),function(a,b,c){"use strict";var d=a.module("table.column-resizing",["table.scrolling-table"]);d.directive("tableColumnsResizable",["$timeout","$document","TableAttributes",function(a,d,e){var f=function(a,b){var c=a.offsetX;return void 0===c&&(c=a.pageX-b.offset().left),c};return{link:function(g,h){var i=b(d[0].body);a(function(){var a=b(h).closest(".tableWrapper"),d=h.find("thead th:last-child()")[0];h.find("thead th").mousemove(function(a){var c=b(a.target),g=c.outerWidth(),h=f(a,c);d.cellIndex!==a.target.cellIndex&&10>g-h&&!c.hasClass(e.columnFixed)&&"true"!==c.attr(e.columnFixed)?c.css("cursor","col-resize"):c.css("cursor","")}),h.find("thead tr").mousedown(function(g){var h=b(g.target),j=f(g,h);if(!(d.cellIndex===g.target.cellIndex||"TH"!==h[0].nodeName||h.outerWidth()-j>10||h.hasClass(e.columnFixed)||"true"===h.attr(e.columnFixed))){var k=g.screenX,l=b(g.currentTarget),m=i.css("cursor");l.mousemove(function(b){i.css("cursor","col-resize");var d=b.screenX-k;k=b.screenX;var e=h.outerWidth()+d,f=h.css("min-width");f=+f.substring(0,f.length-2);var g=c.max(e,f)+"px",j=a.find("col:nth-child("+(h[0].cellIndex+1)+")");j.attr("width",g)}),l.mouseup(function(){i.css("cursor",m),l.off("mousemove"),l.off("mouseup")})}})},0,!1)}}}])}(angular,jQuery,Math),function(a,b,c,d){"use strict";var e=a.module("table.column-visibility",["table.scrolling-table"]);e.factory("ColumnVisibilityService",["$timeout",function(a){return this.setColumnVisibility=function(c,d,e){var f=b("#"+c+" col:nth-child("+(d+1)+")"),g=b("#"+c+" th:nth-child("+(d+1)+")"),h=b("#"+c+" td:nth-child("+(d+1)+")");e?(g.each(function(){this.classList.remove("col-hidden")}),h.each(function(){this.classList.remove("col-hidden")}),f.each(function(){this.classList.remove("col-hidden")})):(g.each(function(){this.classList.add("col-hidden")}),h.each(function(){this.classList.add("col-hidden")}),f.each(function(){this.classList.add("col-hidden")})),isFirefox()&&a(function(){b("#"+c+" td").css({width:"100%"})},0,!1)},this}]),e.directive("tableVisibilityMenu",["$compile","$timeout","$document","$window","ColumnVisibilityService","ScrollingTableHelper",function(a,e,f,g,h,i){var j=function(a,c){return b("#"+a+" th:nth-child("+(c+1)+")").hasClass("col-hidden")};return{restrict:"AE",controller:["$scope",function(a){a.toggleVisibilityCallback=function(b,c){var d=j(b,c);h.setColumnVisibility(b,c,d),a.colVisibilityModel["col-"+c]=d}}],link:function(h,k){b(k).on("click",function(){e(function(){h.colVisibilityModel=[];var e=i.getIdOfContainingTable(k);if(!e)for(var l=k.parent();!e&&l.length>0;)e=i.getIdOfContainingTable(l.find(".tableWrapper")),l=l.parent();var m=b("#"+e+" th"),n=b(".column-menu");0===n.length&&(b(f[0].body).append("<div class='column-menu'></div>"),n=b(".column-menu"));var o="<ul>";m.each(function(a,c){var d=j(e,c.cellIndex);h.colVisibilityModel["col-"+c.cellIndex]=!d,o+="<li><input type='checkbox' ng-model='colVisibilityModel[\"col-"+c.cellIndex+"\"]' ng-change='toggleVisibilityCallback(\""+e+'",'+c.cellIndex+")'>"+b(c).text()+"</li>"}),o+="</ul>";var p=a(o)(h);n.html(p);var q=k.position(),r=d.min(b(g).width()-n.width()-15,q.left+5);n.css({left:r,top:q.top+5}),n.show(),c.addContainer(n)})})}}}]),e.directive("colVisibility",["$log","ScrollingTableHelper","ColumnVisibilityService","TableEvents",function(a,b,c,d){return{restrict:"A",link:function(e,f,g){var h=f[0].tagName;if("COL"!==h&&"TH"!==h)return void a.error("Using col-visibility on an element "+h+" is not supported.");var i=b.getIdOfContainingTable(f),j=null;if(i){var k=!0;("hidden"===g.colVisibility||"false"===g.colVisibility)&&(k=!1);var l=function(a){var b=f.parent().children().toArray().indexOf(f[0]);null!==j&&j(),j=e.$on(d.insertRows,function(){c.setColumnVisibility(i,b,a)}),c.setColumnVisibility(i,b,a)};e.$on(d.changeVisibility,function(a,b){b.tableId&&b.tableId===i&&b.elm===f.get()[0]&&(k=b.visible,c.setVisibility(k))}),l(k)}}}}])}(angular,jQuery,MouseClickObserver,Math),function(a,b,c){"use strict";var d=a.module("table.empty-table",[]);d.directive("tableEmptyMessage",["$timeout","$log",function(a,d){return{link:function(e,f,g){var h=""!==g.tableEmptyMessage?g.tableEmptyMessage:"No items.",i=b('<tr class="empty-msg"></tr>'),j=function(a){a&&0!==a.length?i.hide():i.show()};a(function(){var a=c.extractCollection(f);void 0===a&&d.warn("no model data found.");var b=f.find("tbody"),g=b.find("tr").length;i.append("<div>"+h+"</div>"),b.append(i),g>0&&i.hide(),a&&e.$watchCollection(a,j)},0,!1)}}}])}(angular,jQuery,RepeaterUtilities),function(a,b){"use strict";var c=a.module("table.highlightColumn",["table.scrolling-table"]);c.directive("colHighlight",["$timeout","$log","ScrollingTableHelper","TableEvents",function(a,c,d,e){function f(a,c){var d=b("#"+a+" tbody td:nth-child("+(c+1)+")");g(d)}function g(a){a.off("mouseenter mouseleave"),a.hover(function(){a.each(function(){this.classList.add("col-highlight")})},function(){a.each(function(){this.classList.remove("col-highlight")})})}return{restrict:"A",link:function(g,h){var i=h[0].tagName;if("COL"!==i&&"TH"!==i)return void c.error("Using col-highlight on an element "+i+" is not supported.");var j=d.getIdOfContainingTable(h);if(j){var k=h.parent().children().toArray().indexOf(h[0]);void 0!==k&&(a(function(){f(j,k)},0,!1),g.$on(e.insertRows,function(){f(j,k)})),g.$on("$destroy",function(){var a=b("#"+j+" tbody td:nth-child("+(k+1)+")");a.off("mouseenter mouseleave")})}}}}])}(angular,jQuery),function(a){"use strict";a.module("ng-scrolling-table",["table.scrolling-table","table.empty-table","table.table-selector","table.highlightColumn","table.column-resizing","table.column-visibility","table.column-fixed"])}(angular),MutationObserver=window.MutationObserver||window.WebKitMutationObserver,function(a,b,c,d){"use strict";var e=function(){function a(){return c.floor(65536*(1+c.random())).toString(16).substring(1)}return function(){return"s"+a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),f=a.module("table.scrolling-table",[]);f.service("ScrollingTableHelper",function(){return{getIdOfContainingTable:function(a){a=b(a);var c=a.closest(".tableWrapper");return c&&c[0]?c[0].id:(c=a.find(".tableWrapper"),c&&1===c.length?c[0].id:void 0)}}}),f.constant("TableEvents",{insertRows:"insert-rows",deleteRows:"delete-rows",changeVisibility:"change-visibility",selection:"select",clearSelection:"clear-selection"}),f.constant("TableAttributes",{refId:"ref-id",columnFixed:"col-fixed"}),f.directive("tableScrollingTable",["$timeout","$log","$document","ScrollingTableHelper","TableAttributes","TableEvents",function(f,g,h,i,j,k){function l(a,c){var d=a.find(".scroller tr");d.each(function(a,d){var f=b(d);void 0===f.attr(c)&&f.attr(c,e())})}function m(a,c){var e=new d(function(a,b){for(var d=!1,e=a.length,f=0;e>f;++f){var g=a[0],h=g.addedNodes&&g.addedNodes.length>0?g.addedNodes:g.removedNodes,i=h.length;if(i>0)for(var j=0;i>j;j++){var k=h[j];if("TR"===k.tagName){d=!0;break}}if(d)break}d&&(c.apply(this),b.disconnect())}),f=b("#"+a);return f.length>0&&e.observe(f.find(" tbody").get(0),{childList:!0}),e}function n(a,c){var d=null,e=(new Date).getTime(),h=0,i=function(a){h=a,e=(new Date).getTime()},j=function(){if(null!==d&&0===b("#"+a).length)return f.cancel(d),d=null,void g.debug("detected removed table from DOM.  Cancelling timers.");var l=b("#"+a+" tbody tr").length;l>h?(c.$emit(k.insertRows,{tableId:a,inserted:l-h}),i(l)):h>l&&(c.$emit(k.deleteRows,{tableId:a,deleted:h-l}),i(l));var n=(new Date).getTime()-e;if(n>5e3)g.debug("switching to mutation observation state for... "+a),m(a,j);else{var o=2500>n?250:500;d=f(j,o,!1)}};j()}function o(a){var b=a.find(".scroller"),d=a.find(".tableHeader"),e=a.height()-d.height();b.css("max-height",c.max(e,250)+"px"),d.css("padding-right",b.width()-b.find("table").width()+"px")}function p(a,c,d,e,f){var g=a.find("colgroup");if(0===g.length){var i="<colgroup>";e.find("th").each(function(a,c){var d=b(c),e=null;if(""!==c.className){var g=d.clone();b(h[0].body).append(g),e=g.css("width"),g.remove()}void 0!==d.attr("width")&&(e=d.attr("width"),d.removeAttr("width"),f.find("td:nth-child("+(a+1)+")").removeAttr("width")),i+="<col "+(null!==e?'width="'+e+'"':"")+"/>"}),i+="</colgroup>",g=b(i),g.appendTo(c)}else g.detach().appendTo(c);g.clone().appendTo(d)}function q(b,c){var d=b[0].attributes,e="";a.forEach(d,function(a){var b=a.nodeName;0!==b.indexOf("data-table-")&&0!==b.indexOf("table-")&&0!==b.indexOf("data-col-")&&0!==b.indexOf("col-")?c.attr(b,a.value):(0===e.length&&(e+="<!--\n"),e+="    "+b+'="'+a.value+'"\n')}),e.length>0&&(e+="-->"),c.prepend(e)}return{restrict:"A",scope:!0,compile:function(a,c){var d=b('<div class="tableWrapper" id="'+e()+'"><div class="tableHeader"><table></table></div><div class="scroller"><table></table></div></div>'),f=b(d.find(".tableHeader table")[0]),g=b(d.find(".scroller table")[0]),h=a.find("thead"),m=a.find("tbody");p(a,f,g,h,m),h.each(function(a,c){b(c).detach().appendTo(f)}),m.each(function(a,c){b(c).detach().appendTo(g)}),q(a,d);var r=a.css("max-height");r&&"none"!==r||!c.height||(r=c.height+"px");var s="true"===c.tableAlwaysScroll,t=d.find(".scroller");s&&t.css("overflow-y","scroll"),d.css({"max-height":r,height:r}),a.after(d),a.remove();var u="<.*>",v=f.find("tr"),w=[];v.children().each(function(a,b){w.push(b.outerHTML.match(u)[0])}),v.empty(),v.append(b(w.join("")));var x=g.find("tr"),y=[];return x.children().each(function(a,b){y.push(b.outerHTML.match(u)[0])}),x.empty(),x.append(b(y.join(""))),{pre:function(a){a.headersElemArray=w,a.bodyElemArray=y},post:function(a,c,d){var e="undefined"!=typeof d.refId?d.refId:j.refId,f=c.find(".tableHeader thead").first().clone(),g=f.find("th");c.append(f);for(var h=i.getIdOfContainingTable(c),m=g.length,p=0;m>p;p++){var q=b(g[p]).width()+"px";c.find(".tableHeader th:nth-child("+(p+1)+")").css("minWidth",q)}f.remove();var r=function(a,b){var d=b.tableId;!d&&a.currentTarget&&(d=a.currentTarget.id),d===h&&s(c,e)},s=function(a,b){o(a),l(a,b)};s(c,e),b("#"+h).resize(r),n(h,a),a.$on(k.insertRows,r),a.$on(k.deleteRows,r)}}}}}])}(angular,jQuery,Math,MutationObserver),function(a){"use strict";a.module("table.table-selector",["table.scrolling-table"]).directive("tableSelector",["$timeout","$log","TableEvents","TableAttributes","ScrollingTableHelper",function(b,c,d,e,f){return{controller:["$scope",function(b){var c=b.$parent,e=!1;c.tableModel={selectedRows:[]},c.selection={isSelected:function(a){return c.tableModel.selectedRows.indexOf(a)>=0},hasSelection:function(){return c.tableModel.selectedRows.length>0},clearSelected:function(){c.tableModel.selectedRows.length=0},getSelected:function(){return c.tableModel.selectedRows},setMultiSelect:function(a){e=a},selectRow:function(b){var f=c.tableModel.selectedRows,g=[],h=f.indexOf(b);return h>=0&&(f.splice(h,1),g.push(b)),e||(a.forEach(f,function(a){g.push(a)}),f.length=0),g.indexOf(b)<0&&f.push(b),c.$emit&&c.$emit(d.selection,{selected:f}),g}}}],link:function(g,h,i){var j=f.getIdOfContainingTable(h),k="undefined"!=typeof i.refId?i.refId:e.refId,l="undefined"!=typeof i.tableMultiSelect&&"true"===i.tableMultiSelect;g.selection.setMultiSelect(l),h.on("click","td",function(c){var d=$(c.currentTarget).closest("tr"),e=d.attr(k);b(function(){var b=d.hasClass("selected");l?b&&d[0].classList.remove("selected"):$(c.currentTarget).closest("tr.selected").each(function(){this.classList.remove("selected")}),b||d[0].classList.add("selected");var f=g.selection.selectRow(e);if(f.length>0){var h=d.closest("tbody").find("tr.selected");a.forEach(f,function(b){a.forEach(h,function(a){var c=$(a);c.attr(k)===b&&a.classList.remove("selected")})})}},0,!1)}),g.$on(d.clearSelection,function(a,d){return d&&d.tableId?void(g.selection&&d.tableId&&d.tableId===j&&(g.selection.clearSelected(),b(function(){h.find("tbody tr.selected").each(function(){this.classList.remove("selected")})},0,!1))):void c.error("A tableId parameter is required to clear selection.")}),h.on("$destroy",function(){h.off("click","td")})}}}])}(angular);